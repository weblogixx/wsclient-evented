!function(t){function e(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),o=function(){function t(e){var n=this,s=arguments.length<=1||void 0===arguments[1]?"":arguments[1],o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];r(this,t),this.emitter=new i.EventEmitter,this.url=e,this.protocols=s.length>0?s:"",this.reconnectAttempts=0,this.timeout=null,this.forcedClose=!1,this.ws=null,this.settings={autoOpen:!0,autoReconnect:!0,reconnectInterval:250,binaryType:"blob",maxReconnects:null,onBeforeWsOpen:null,onWsOpen:null,onWsMessage:null,onWsClose:null,onWsError:null};for(var u in o)this.settings[u]=o[u];for(var c=["onBeforeWsOpen","onWsOpen","onWsMessage","onWsClose","onWsError"],a=function(){var t=c[p];"function"==typeof n.settings[t]&&n.emitter.addListener(t,function(e){n.settings[t](e,n)})},p=0;p<c.length;p++)a();this.emitter.addListener("onWsMessage",function(t){var e=JSON.parse(t.data),r=typeof e;"object"===r&&e.type&&n.emitter.emit(e.type,t,e)}),this.settings.autoOpen&&this.open()}return s(t,[{key:"addListener",value:function(t,e){return this.emitter.addListener(t,e),this}},{key:"removeListener",value:function(t){return this.emitter.removeAllListeners(t),this}},{key:"send",value:function(t,e){var n=this;if(!t||!e)throw"Must provide type and payload, provided: "+t+", "+e;return this.ws&&this.ws.readyState===WebSocket.OPEN?(this.ws.send(JSON.stringify({type:t,payload:e})),this):(this.open(),window.setTimeout(function(){n.send(t,e)},50),this)}},{key:"open",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return this.settings.maxReconnects&&this.reconnectAttempts>=this.settings.maxReconnects?this:(!e&&this.ws&&this.close(),this.emitter.emit("onBeforeWsOpen"),this.ws=new WebSocket(this.url,this.protocols),this.ws.binaryType=this.settings.binaryType,this.ws.addEventListener("open",function(e){t.emitter.emit("onWsOpen",e,t),t.reconnectAttempts=0}),this.ws.addEventListener("message",function(e){t.emitter.emit("onWsMessage",e,t)}),this.ws.addEventListener("close",function(e){t.emitter.emit("onWsClose",e,t),!t.forcedClose&&t.settings.autoReconnect&&setTimeout(function(){t.reconnectAttempts++,t.open(!0)},50)}),this.ws.addEventListener("error",function(e){t.emitter.emit("onWsError",e,t)}),this)}},{key:"close",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1e3:arguments[0],e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.ws&&(this.forcedClose=!0,this.ws.close(t,e),this.ws=null),this}}]),t}();window.WsClientEvented=o,e["default"]=o,t.exports=e["default"]},function(t,e,n){"use strict";var r=function(t,e,n,r,s,i,o,u){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[n,r,s,i,o,u],p=0;c=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return a[p++]}))}throw c.framesToPop=1,c}};t.exports=r},function(t,e,n){var r={EventEmitter:n(3)};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(4),i=n(6),o=n(7),u=n(1),c=function(){function t(){r(this,t),this._subscriber=new i,this._currentSubscription=null}return t.prototype.addListener=function(t,e,n){return this._subscriber.addSubscription(t,new s(this._subscriber,e,n))},t.prototype.once=function(t,e,n){var r=this;return this.addListener(t,function(){r.removeCurrentListener(),e.apply(n,arguments)})},t.prototype.removeAllListeners=function(t){this._subscriber.removeAllSubscriptions(t)},t.prototype.removeCurrentListener=function(){this._currentSubscription?void 0:u(!1),this._subscriber.removeSubscription(this._currentSubscription)},t.prototype.listeners=function(t){var e=this._subscriber.getSubscriptionsForType(t);return e?e.filter(o.thatReturnsTrue).map(function(t){return t.listener}):[]},t.prototype.emit=function(t){var e=this._subscriber.getSubscriptionsForType(t);if(e){for(var n=Object.keys(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},t.prototype.__emitToSubscription=function(t,e){var n=Array.prototype.slice.call(arguments,2);t.listener.apply(t.context,n)},t}();t.exports=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=n(5),o=function(t){function e(n,s,i){r(this,e),t.call(this,n),this.listener=s,this.context=i}return s(e,t),e}(i);t.exports=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.subscriber=e}return t.prototype.remove=function(){this.subscriber.removeSubscription(this)},t}();t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(1),i=function(){function t(){r(this,t),this._subscriptionsForType={},this._currentSubscription=null}return t.prototype.addSubscription=function(t,e){e.subscriber!==this?s(!1):void 0,this._subscriptionsForType[t]||(this._subscriptionsForType[t]=[]);var n=this._subscriptionsForType[t].length;return this._subscriptionsForType[t].push(e),e.eventType=t,e.key=n,e},t.prototype.removeAllSubscriptions=function(t){void 0===t?this._subscriptionsForType={}:delete this._subscriptionsForType[t]},t.prototype.removeSubscription=function(t){var e=t.eventType,n=t.key,r=this._subscriptionsForType[e];r&&delete r[n]},t.prototype.getSubscriptionsForType=function(t){return this._subscriptionsForType[t]},t}();t.exports=i},function(t,e){"use strict";function n(t){return function(){return t}}function r(){}r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r}]);
//# sourceMappingURL=wsclient-evented.js.map